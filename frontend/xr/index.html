<!DOCTYPE html>
<html>
<head>
    <title>Ryan's XR Land</title>
    <meta charset="UTF-8">
    
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/super-hands@3.0.4/dist/super-hands.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@7.0.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/@c-frame/aframe-physics-system@4.2.2/dist/aframe-physics-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-extras@0.1.3/dist/aframe-physics-extras.min.js"></script>

    <script>
        AFRAME.registerComponent('phase-shift', {
        init: function () {
            var el = this.el
            el.addEventListener('gripdown', function () {
            el.setAttribute('collision-filter', {collisionForces: true})
            })
            el.addEventListener('gripup', function () {
            el.setAttribute('collision-filter', {collisionForces: false})
            })
        }
        });
    </script>
</head>
<body>
    <a-scene physics>
        <a-assets>
            <a-asset-item id="golf_club" src="/models/grey_putter.gltf"></a-asset-item>
            <a-mixin id="all-interactions"
                 hoverable grabbable stretchable draggable
                 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                 dynamic-body
            ></a-mixin>

            <a-mixin id="grab-move"
                    hoverable grabbable draggable
                    event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                    event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                    dynamic-body
            ></a-mixin>

            <a-mixin id="physics-hands"
                    physics-collider phase-shift
                    collision-filter="collisionForces: false"
                    static-body="shape: sphere; sphereRadius: 0.02"
                    super-hands="colliderEvent: collisions;
                                colliderEventProperty: els;
                                colliderEndEvent: collisions;
                                colliderEndEventProperty: clearedEls;"
            ></a-mixin>
        </a-assets>

        <a-entity>
            <a-camera positon="0 1.6 0"></a-camera>
            <a-entity id="rhand" mixin="touch"
                        hand-controls="hand: right">
            </a-entity>
            <a-entity id="lhand" mixin="touch"
                        hand-controls="hand: left">
            </a-entity>
        </a-entity>

        <!-- ground collider keeps objets from falling -->
        <a-box static-body width="100" height="0.01" depth="100" visible="false"></a-box>

        <a-entity gltf-model="#golf_club"
                position="0 2 -2"
                rotation="125 100 70"
                scale="0.5 0.5 0.5"></a-entity>

        <a-text value="Welcome to Ryan's Landing Page!"
                position="-1.5 2.5 -2"
                rotation="0 10 0"
                color="#1b694f"></a-text>

        <a-entity environment="preset: forest;
                ground: hills;
                groundTexture: squares;
                groundYScale: 20;
                seed: 2"></a-entity>
    </a-scene>
</body>
</html>